## API Report File for "@xoram/core"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { Emitter } from 'mitt';
import type { EventType } from 'mitt';
import type { Handler } from 'mitt';
import type { WildcardHandler } from 'mitt';

// @public
export function addPlugin(definePlugin: PluginDefinition): void;

// @public
export function addPlugin(definePlugin: PluginDefinition, app: Application): void;

// @public
export function addPlugins(definePlugins: PluginDefinition[]): void;

// @public
export function addPlugins(definePlugins: PluginDefinition[], app: Application): void;

// @public
export function addService<id extends ServiceId>(id: id, serviceFactory: ServiceFactory<ServiceCollection[id]>): void;

// @public
export function addService<id extends ServiceId>(id: id, service: ServiceCollection[id]): void;

// @public
export interface Application {
    // @internal
    [pluginSymbol]: Map<PluginId, DefinedPlugin>;
    alive: boolean;
    // @internal
    readonly emitter: Emitter<ApplicationHooks>;
    readonly id: string;
    readonly options: Partial<ApplicationOptions>;
    readonly services: Readonly<Prettify<ServiceCollection>>;
}

// @public
export type ApplicationHooks = ApplicationServiceHooks & ApplicationPluginHooks;

// @public
export interface ApplicationOptions {
    id: string;
    onError: (error: unknown) => void;
}

// @public
export type ApplicationPluginHooks = {
    beforePluginRegistration: ApplicationPluginLifeCycleEvent;
    pluginRegistered: ApplicationPluginLifeCycleEvent;
    beforePluginRemoved: ApplicationPluginLifeCycleEvent;
    pluginRemoved: ApplicationPluginLifeCycleEvent;
    failedPluginRegistration: {
        app: Application;
        reason: Error;
    };
};

// @public
export type ApplicationPluginLifeCycleEvent = {
    app: Application;
    plugin: DefinedPlugin;
};

// @public
export type ApplicationServiceHooks = {
    beforeServiceAdded: {
        app: Application;
        service: Service;
        serviceId: ServiceId;
    };
    serviceAdded: {
        app: Application;
        service: Service;
        serviceId: ServiceId;
    };
    beforeServiceRemoved: {
        app: Application;
        serviceId: ServiceId;
        service: Service;
    };
    serviceRemoved: {
        app: Application;
        serviceId: ServiceId;
    };
};

// @public
export function createApp(plugins: PluginDefinition[], options?: Partial<ApplicationOptions>): Application;

// @public
export function defineAsyncPlugin(importer: (app: Application) => Promise<OneOrMore<PluginDefinition>>, when: (app: Application) => Promise<void>, dependencies?: PluginId[]): PluginDefinition;

// @internal
export function defineAsyncPlugin(importer: (app: Application) => Promise<OneOrMore<PluginDefinition>>, when: (app: Application) => Promise<void>, dependencies?: PluginId[], done?: (app: Application, plugin: DefinedPlugin) => void): PluginDefinition;

// @public
export interface DefinedPlugin {
    dependencies: PluginId[];
    // @internal
    hooks: Emitter<_PluginHooks>;
    id: PluginId;
    // @internal
    phase: _PluginPhase;
}

// @public
export function definePlugin(setup: PluginSetup): PluginDefinition;

// @public
export function definePlugin(name: string, setup: PluginSetup): PluginDefinition;

// @public
export function defineService<notification extends Record<string, unknown> = Record<string, never>>(): () => Service<notification>;

// @public
export function defineService<notification extends Record<string, unknown> = Record<string, never>, service extends Record<string, unknown> = Record<string, unknown>>(setup: (app: Application, emitter: Emitter<notification & ServiceNotifications>) => service): (app: Application) => Prettify<Service<notification> & service>;

// @public
export function defineService<service extends Service>(setup: (app: Application, emitter: Emitter<NotificationsFromService<service> & ServiceNotifications>) => Omit<service, keyof Service>): (app: Application) => service;

// @public
export function dependsOn(dependency: PluginId): void;

// @public
export function destroyApp(app: Application): void;

// @public
export type EventCleanup = () => void;

// @public
type EventSource_2<notifications extends Notifications> = Emitter<notifications>;
export { EventSource_2 as EventSource }

// @public
export type EventSourceContainer<notifications extends Notifications> = {
    emitter: Emitter<notifications>;
};

// @public
export type EventSourceGetter<notifications extends Notifications> = ((application: Application) => (EventSource_2<notifications> | EventSourceContainer<notifications>));

// @public (undocumented)
type EventTarget_2<notifications extends Notifications> = EventSource_2<notifications> | EventSourceContainer<notifications> | EventSourceGetter<notifications> | ServiceId;
export { EventTarget_2 as EventTarget }

// @public (undocumented)
export type MergedEvents<notifications extends Notifications, events extends (keyof notifications)[]> = UnionToIntersection<notifications[events[number]]>;

// @public (undocumented)
export type Notifications = Record<EventType, unknown>;

// @public (undocumented)
export type NotificationsFromService<service> = service extends Service<infer notification> ? notification : never;

// @public
export const onBeforeCreate: (callback: ((app: Application) => void)) => void;

// @public
export const onBeforeDestroy: (callback: ((app: Application) => void)) => void;

// @public
export const onCreated: (callback: ((app: Application) => void)) => void;

// @public (undocumented)
export type OneOrMore<item> = item | [item, ...item[]];

// @public
export function onEvent<notifications extends Notifications, events extends (keyof notifications)[]>(target: EventTarget_2<notifications>, on: events, handler: Handler<MergedEvents<notifications, events>>): EventCleanup;

// @public
export function onEvent<notifications extends Notifications>(target: EventTarget_2<notifications>, on: '*', handler: WildcardHandler<notifications>): EventCleanup;

// @public
export function onEvent<notifications extends Notifications, event extends keyof notifications>(target: EventTarget_2<notifications>, on: event, handler: Handler<notifications[event]>): EventCleanup;

// @public
export interface PluginDefinition {
    (): DefinedPlugin;
    id: PluginId;
}

// @internal
export type _PluginHooks = {
    setup: never;
    beforeCreate: Application;
    created: Application;
    beforeDestroy: Application;
    destroyed: Application;
};

// @public
export type PluginId = symbol;

// @internal
export type _PluginPhase = 'setup' | 'mount' | 'active' | 'teardown' | 'destroyed';

// @public
export type PluginSetup = () => void;

// @public
export type Prettify<T> = {
    [K in keyof T]: T[K];
} & {};

// @public
export function removePlugin(idOrPlugin: PluginId | DefinedPlugin): void;

// @public
export function removePlugin(idOrPlugin: PluginId | DefinedPlugin, app: Application): void;

// @public
export interface Service<notifications extends Record<string, unknown> = Record<string, unknown>> {
    emitter: Emitter<notifications & ServiceNotifications>;
}

// @public
export interface ServiceCollection {
    // (undocumented)
    [id: string | symbol]: Service;
}

// @public
export type ServiceFactory<service extends Service> = (application: Application) => service;

// @public (undocumented)
export type ServiceId = keyof ServiceCollection & (symbol | string);

// @public
export interface ServiceNotifications {
    // (undocumented)
    [x: string | symbol]: unknown;
    // @eventProperty (undocumented)
    'before_destroy': {
        service: Service;
    };
}

// @public (undocumented)
export type UnionToIntersection<U> = (U extends any ? (x: U) => void : never) extends ((x: infer I) => void) ? I : never;

// @beta (undocumented)
export function useService<id extends keyof ServiceCollection>(serviceId: id): ServiceCollection[id];

// @internal
export function _warn(msgOrError: string | Error, ...args: unknown[]): void;

```
